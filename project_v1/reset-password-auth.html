<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./reset-password-auth.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
    />
  </head>
  <body>
    <div class="reset-password-auth">
      <div class="frame967">
        <div class="frame968">
          <div class="frame969">
            <b class="text506">인증번호를 전송했습니다</b>
          </div>
          <div class="text507">
            인증번호를 확인하고 비밀번호를 재설정하세요.
          </div>
        </div>
        <div class="frame970">
          <div class="frame971">
            <div class="frame972">
              <div class="text508">이메일 주소1</div>

                <span class="text123"id="mergedEmail"></span>

              
            </div>
          </div>
          <div class="frame971">
            <div class="frame972">
              <div class="text508">인증 번호</div>
              <div class="frame973">
                <input type="text" id="code" class="text123" placeholder="Verification Codeail" />
                <span id="timer"></span>

              </div>
            </div>
            <div class="text510">인증번호가 올바르지 않습니다.</div>
          </div>
          <div class="frame977">

              <div class="text514">인증하기</div>

          </div>
        </div>
      </div>
    </div>

    <script>
      // reset-password-auth.html 페이지의 JavaScript 부분
      document.addEventListener("DOMContentLoaded", function () {
        // 쿠키에서 userEmail 값 가져오기
        var userEmail = getCookie("userEmail");
        
        // 이메일 주소 표시
      var mergedEmailResult = document.getElementById("mergedEmail");
      if (userEmail) {
        mergedEmailResult.textContent = decodeURIComponent(userEmail);
      } else {
        mergedEmailResult.textContent = "저장된 이메일 주소가 없습니다.";
      }
      });

      // 쿠키 가져오는 함수
      function getCookie(name) {
        console.log("쿠키",name)
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length === 2) {
          return parts.pop().split(";").shift();
        }
      }


    document.addEventListener("DOMContentLoaded", function () {
    var codeInput = document.getElementById("code");
    var timerSpan = document.getElementById("timer");
    var timerInterval;
    var timerDuration = 180; // 3 minutes in seconds

    function updateTimerDisplay(remainingTime) {
        var minutes = Math.floor(remainingTime / 60);
        var seconds = remainingTime % 60;
        timerSpan.textContent = minutes + "m " + seconds + "s";
    }

    function startTimer() {
        var startTime = Date.now();
        
        timerInterval = setInterval(function () {
            var currentTime = Date.now();
            var elapsedTime = Math.floor((currentTime - startTime) / 1000);

            if (elapsedTime >= timerDuration) {
                clearInterval(timerInterval);
                timerSpan.textContent = "Timer expired!";
                // Redirect to reset-password.html after timer expiration
                window.location.href = "./reset-password.html";
            } else {
                var remainingTime = timerDuration - elapsedTime;
                updateTimerDisplay(remainingTime);
            }
        }, 1000);
    }

    // Call startTimer() when the page loads
    startTimer();
});


    </script>
  </body>
</html>
